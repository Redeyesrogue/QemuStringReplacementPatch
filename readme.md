Credit to nbaertsch who I got the original patch from and edited as a base
